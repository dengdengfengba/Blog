<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>地图控件 | 等等风吧</title>
    <meta name="description" content="等等风的个人博客">
    <link rel="apple-touch-icon" href="/Blog/apple-touch-icon.png">
  <link rel="icon" href="/Blog/favicon-32x32.png">
  <link rel="manifest" href="/Blog/manifest.json">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.f4f6d0f1.css" as="style"><link rel="preload" href="/Blog/assets/js/app.0ad31845.js" as="script"><link rel="preload" href="/Blog/assets/js/2.1b5dd912.js" as="script"><link rel="preload" href="/Blog/assets/js/13.98392899.js" as="script"><link rel="preload" href="/Blog/assets/js/4.a1875dba.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.136c3538.js"><link rel="prefetch" href="/Blog/assets/js/11.12bceb81.js"><link rel="prefetch" href="/Blog/assets/js/12.c0e97e00.js"><link rel="prefetch" href="/Blog/assets/js/14.1a016337.js"><link rel="prefetch" href="/Blog/assets/js/15.8552bcca.js"><link rel="prefetch" href="/Blog/assets/js/16.458a1e33.js"><link rel="prefetch" href="/Blog/assets/js/17.67ad1ebe.js"><link rel="prefetch" href="/Blog/assets/js/18.e3a80131.js"><link rel="prefetch" href="/Blog/assets/js/19.7e8621a9.js"><link rel="prefetch" href="/Blog/assets/js/20.cd4ef131.js"><link rel="prefetch" href="/Blog/assets/js/21.d0904527.js"><link rel="prefetch" href="/Blog/assets/js/22.49895c6b.js"><link rel="prefetch" href="/Blog/assets/js/23.86d794cd.js"><link rel="prefetch" href="/Blog/assets/js/24.e31324ae.js"><link rel="prefetch" href="/Blog/assets/js/25.b8433c7d.js"><link rel="prefetch" href="/Blog/assets/js/26.6b1a1ab1.js"><link rel="prefetch" href="/Blog/assets/js/27.9381e493.js"><link rel="prefetch" href="/Blog/assets/js/28.7d39c37b.js"><link rel="prefetch" href="/Blog/assets/js/29.866cb72b.js"><link rel="prefetch" href="/Blog/assets/js/3.aba7f2b2.js"><link rel="prefetch" href="/Blog/assets/js/30.0aa32a81.js"><link rel="prefetch" href="/Blog/assets/js/31.44290afc.js"><link rel="prefetch" href="/Blog/assets/js/32.3cf2a1f9.js"><link rel="prefetch" href="/Blog/assets/js/33.71d68c25.js"><link rel="prefetch" href="/Blog/assets/js/34.5c6eedf2.js"><link rel="prefetch" href="/Blog/assets/js/35.8e4b784e.js"><link rel="prefetch" href="/Blog/assets/js/36.3da44658.js"><link rel="prefetch" href="/Blog/assets/js/37.4accd394.js"><link rel="prefetch" href="/Blog/assets/js/38.aa2bb673.js"><link rel="prefetch" href="/Blog/assets/js/39.4c249910.js"><link rel="prefetch" href="/Blog/assets/js/40.90359bf7.js"><link rel="prefetch" href="/Blog/assets/js/41.ddce87f5.js"><link rel="prefetch" href="/Blog/assets/js/42.7e8c7a2d.js"><link rel="prefetch" href="/Blog/assets/js/43.ef98017e.js"><link rel="prefetch" href="/Blog/assets/js/44.aa779bb0.js"><link rel="prefetch" href="/Blog/assets/js/5.c75dcd3b.js"><link rel="prefetch" href="/Blog/assets/js/6.7e1b8072.js"><link rel="prefetch" href="/Blog/assets/js/7.35f20a04.js"><link rel="prefetch" href="/Blog/assets/js/8.fa8588d8.js"><link rel="prefetch" href="/Blog/assets/js/9.dff8b2a7.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.f4f6d0f1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">等等风吧</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/web/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/javascript/" class="nav-link">javascript</a></li></ul></div></div><div class="nav-item"><a href="/Blog/backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Blog/sql/" class="nav-link">数据库</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Gis</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/gis/OGC/" class="nav-link">OGC</a></li><li class="dropdown-item"><!----> <a href="/Blog/gis/openlayers/" class="nav-link router-link-active">openlayers</a></li></ul></div></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">大杂烩</a></div><div class="nav-item"><a href="/Blog/wen/" class="nav-link">好文欣赏</a></div><div class="nav-item"><a href="/Blog/guide/" class="nav-link">Guide</a></div> <a href="https://github.com/dengdengfengba/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/web/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/javascript/" class="nav-link">javascript</a></li></ul></div></div><div class="nav-item"><a href="/Blog/backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Blog/sql/" class="nav-link">数据库</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Gis</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/gis/OGC/" class="nav-link">OGC</a></li><li class="dropdown-item"><!----> <a href="/Blog/gis/openlayers/" class="nav-link router-link-active">openlayers</a></li></ul></div></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">大杂烩</a></div><div class="nav-item"><a href="/Blog/wen/" class="nav-link">好文欣赏</a></div><div class="nav-item"><a href="/Blog/guide/" class="nav-link">Guide</a></div> <a href="https://github.com/dengdengfengba/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>openlayers</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/gis/openlayers/" class="sidebar-link">首页</a></li><li><a href="/Blog/gis/openlayers/map.html" class="sidebar-link">创建一个地图实例</a></li><li><a href="/Blog/gis/openlayers/view.html" class="sidebar-link">地图视图</a></li><li><a href="/Blog/gis/openlayers/layers.html" class="sidebar-link">地图图层</a></li><li><a href="/Blog/gis/openlayers/vector.html" class="sidebar-link">地图矢量图层</a></li><li><a href="/Blog/gis/openlayers/source.html" class="sidebar-link">地图图层数据来源</a></li><li><a href="/Blog/gis/openlayers/style.html" class="sidebar-link">地图样式</a></li><li><a href="/Blog/gis/openlayers/control.html" class="active sidebar-link">地图控件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#control类" class="sidebar-link">control类</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#fullscreen-control-全屏控件" class="sidebar-link">fullscreen control - 全屏控件</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#mouseposition-control-鼠标位置控件" class="sidebar-link">mouseposition control - 鼠标位置控件</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#overviewmap-control-全局地图控件" class="sidebar-link">overviewmap control - 全局地图控件</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#rotate-control-地图旋转控件" class="sidebar-link">rotate control - 地图旋转控件</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#scaleline-control-比例尺控件" class="sidebar-link">scaleline control - 比例尺控件</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#zoom-control-缩放控件" class="sidebar-link">zoom control - 缩放控件</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#zoomslider-control-缩放条控件" class="sidebar-link">zoomslider control - 缩放条控件</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#zoomtoextent-control-缩放到图层控件" class="sidebar-link">zoomtoextent control - 缩放到图层控件</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/control.html#相关链接" class="sidebar-link">相关链接</a></li></ul></li><li><a href="/Blog/gis/openlayers/interaction.html" class="sidebar-link">地图交互</a></li><li><a href="/Blog/gis/openlayers/draw1.html" class="sidebar-link">draw详解</a></li><li><a href="/Blog/gis/openlayers/draw2.html" class="sidebar-link">draw原理</a></li><li><a href="/Blog/gis/openlayers/overlay.html" class="sidebar-link">地图覆盖物</a></li><li><a href="/Blog/gis/openlayers/popup.html" class="sidebar-link">地图弹出框</a></li><li><a href="/Blog/gis/openlayers/control1.html" class="sidebar-link">地图自定义控件</a></li><li><a href="/Blog/gis/openlayers/event.html" class="sidebar-link">地图事件</a></li><li><a href="/Blog/gis/openlayers/event1.html" class="sidebar-link">地图鼠标右键事件</a></li><li><a href="/Blog/gis/openlayers/point1.html" class="sidebar-link">地图点聚集</a></li><li><a href="/Blog/gis/openlayers/point2.html" class="sidebar-link">动态点扩散效果</a></li><li><a href="/Blog/gis/openlayers/point3.html" class="sidebar-link">地图实时追踪轨迹</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="介绍"><a href="#介绍" aria-hidden="true" class="header-anchor">#</a> 介绍</h2> <p>每一个地图应用都应该有一些工具方便用户控制地图的行为，比如缩放，全屏，坐标控件等等，在 OpenLayers 中Control就是做这些事的。</p> <h2 id="control类"><a href="#control类" aria-hidden="true" class="header-anchor">#</a> control类</h2> <p><code>OpenLayers</code> 中的控件是由 <code>control</code> 类定义的，这是一个虚基类，不负责实例化特定的控件，它的主要作用是让其他具体的种类的控件类实现继承。<code>OpenLayers</code>中包含的控件有：</p> <ul><li>controldefaults: 地图默认包含的控件，包含缩放控件和旋转控件</li> <li>fullscreencontrol: 全屏控件，用于全屏幕查看地图</li> <li>mousepositioncontrol: 鼠标位置控件，显示鼠标所在地图位置的坐标，可以自定义投影</li> <li>overviewmapcontrol: 地图全局视图控件</li> <li>rotatecontrol: 地图旋转控件</li> <li>scalelinecontrol: 比例尺控件</li> <li>zoomcontrol: 缩放控件</li> <li>zoomslidercontrol: 缩放刻度控件</li> <li>zoomtoextentcontrol: 缩放到全局控件</li></ul> <h2 id="fullscreen-control-全屏控件"><a href="#fullscreen-control-全屏控件" aria-hidden="true" class="header-anchor">#</a> fullscreen control - 全屏控件</h2> <p>地图全屏控件，该控件提供一个全屏按钮，当点击的时候，地图充满整个屏幕（注意是整个屏幕，而不是整个浏览器窗口）；当在全屏模式时，在屏幕的右上角会出现一个退出按钮，用于退出全屏模式，同时按 Esc 按钮也可以退出全屏模式。在 map 对象中添加如下代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>controls<span class="token punctuation">:</span> ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span><span class="token function">defaults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
   <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>FullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p>刷新浏览器即可见：</p> <p><img src="https://img-blog.csdn.net/20150511142242580" alt="markdown" title="markdown"></p> <h2 id="mouseposition-control-鼠标位置控件"><a href="#mouseposition-control-鼠标位置控件" aria-hidden="true" class="header-anchor">#</a> mouseposition control - 鼠标位置控件</h2> <p>鼠标位置控件，用于显示鼠标指针 2D 坐标，默认情况下，它显示的是地图的 view 对象中设置的投影，但是可以修改为任意投影。鼠标位置控件是加载在地图右上角的位置，如，我们在以上全屏控件的基础上加如下代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>controls<span class="token punctuation">:</span> ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span><span class="token function">defaults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>FullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>MousePosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p>刷新浏览器即可见：</p> <p><img src="https://img-blog.csdn.net/20150512125625976" alt="markdown" title="markdown"></p> <p>但这样做，ol默认的鼠标位置空间会将全屏按钮遮盖住，那么我们如何解决这个问题？</p> <p>一是修改 <code>ol.control.MousePosition</code> 的可选参数的默认值；二是覆盖其默认的 CSS 样式类</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @typedef {{className: (string|undefined),
 *     coordinateFormat: (ol.CoordinateFormatType|undefined),
 *     projection: ol.proj.ProjectionLike,
 *     render: (function(ol.MapEvent)|undefined),
 *     target: (Element|undefined),
 *     undefinedHTML: (string|undefined)}}
 * @api stable
 */</span>
</code></pre></div><p>通过控件的api，我们发现其重要参数有：</p> <ul><li>className，显示坐标的 HTML 元素的 class 值，如果不设置，就会默认 ol-mouse-position，也就是默认动态生成的</li> <li>coordinateFormat，设置坐标显示的格式，保留小数点后几位等</li> <li>projection，投影信息，表示显示的坐标的投影坐标系</li></ul> <p>知道用法后，我们就先定义将要显示坐标的 HTML 元素：</p> <div class="language-HTML extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>mouse-position<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>mouse-position-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>custom-mouse-position<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>修改css样式：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.mouse-position-wrapper</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span>300px<span class="token punctuation">;</span> 
    <span class="token property">height</span><span class="token punctuation">:</span>29px<span class="token punctuation">;</span> 
    <span class="token property">color</span><span class="token punctuation">:</span>#FFFFFF<span class="token punctuation">;</span> 
    <span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span> 
    <span class="token property">right</span><span class="token punctuation">:</span>20px<span class="token punctuation">;</span> 
    <span class="token property">bottom</span><span class="token punctuation">:</span>6px<span class="token punctuation">;</span> 
    <span class="token property">z-index</span><span class="token punctuation">:</span>999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>修改 MousePosition 对象:</p> <div class="language-js extra-class"><pre class="language-js"><code>controls<span class="token punctuation">:</span> ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span><span class="token function">defaults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>FullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>MousePosition</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        coordinateFormat<span class="token punctuation">:</span> ol<span class="token punctuation">.</span>coordinate<span class="token punctuation">.</span><span class="token function">createStringXY</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        projection<span class="token punctuation">:</span> <span class="token string">'EPSG:4326'</span><span class="token punctuation">,</span>
        className<span class="token punctuation">:</span> <span class="token string">'custom-mouse-position'</span><span class="token punctuation">,</span>
        target<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'mouse-position'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>        
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p>刷新浏览器，即可得：</p> <p><img src="https://img-blog.csdn.net/20150512131135585" alt="markdown" title="markdown"></p> <h2 id="overviewmap-control-全局地图控件"><a href="#overviewmap-control-全局地图控件" aria-hidden="true" class="header-anchor">#</a> overviewmap control - 全局地图控件</h2> <p>全局地图控件，显示当前视口中的地图位于全局地图的哪一部分，可选的参数如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @typedef {{collapsed: (boolean|undefined),
 *     collapseLabel: (string|Node|undefined),
 *     collapsible: (boolean|undefined),
 *     label: (string|Node|undefined),
 *     layers: (Array.&lt;ol.layer.Layer&gt;|ol.Collection|undefined),
 *     render: (function(ol.MapEvent)|undefined),
 *     target: (Element|undefined),
 *     tipLabel: (string|undefined)}}
 * @api
 *
</span></code></pre></div><ul><li>collapsed，收缩选项；</li> <li>collapseLabel，收缩后的图标按钮</li> <li>collapsible，是否可以收缩为图标按钮，默认为 true</li> <li>label，当 overviewmapcontrol 收缩为图标按钮时，显示在图标按钮上的文字或者符号，默认为 »</li> <li>layers，overviewmapcontrol针对的图层，默认情况下为所有图层</li> <li>render，当 overviewmapcontrol 重新绘制时，调用的函数</li> <li>target，放置的 HTML 元素</li> <li>tipLabel，鼠标放置在图标按钮上的提示文字</li></ul> <p>以上参数都为可选，添加如下代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>OverviewMap</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>默认情况下，控件为收缩状态，点击即可打开，打开后如下图所示：</p> <p><img src="https://img-blog.csdn.net/20150512164940732" alt="markdown" title="markdown"></p> <h2 id="rotate-control-地图旋转控件"><a href="#rotate-control-地图旋转控件" aria-hidden="true" class="header-anchor">#</a> rotate control - 地图旋转控件</h2> <p>地图旋转控件，主要作用是当地图角度不为 0 时，默认显示，点击，使地图恢复旋转角度为 0。可选参数如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @typedef {{duration: (number|undefined),
 *     className: (string|undefined),
 *     label: (string|Node|undefined),
 *     tipLabel: (string|undefined),
 *     target: (Element|undefined),
 *     render: (function(ol.MapEvent)|undefined),
 *     autoHide: (boolean|undefined)}}
 * @api stable
 */</span>
</code></pre></div><ul><li>duration，在开始角度和目标角度转动特效的持续时间，毫秒为单位，默认 240</li> <li>className，表示图标的样式，默认为ol-rotate</li> <li>label，旋转按钮中显示的符号，默认为⇧</li> <li>tipLabel，鼠标在按钮上时的提示文字，默认为Reset rotation</li> <li>target，按钮放置的 HTML 元素的 ID</li> <li>render，当控件重新绘制的时候，调用的函数</li> <li>autoHide，当选择角度为 0 的时候，控件是否自动隐藏，默认值为true，也就是默认隐藏</li></ul> <p>默认情况下，该控件不会显示；当地图旋转角度不为 0 时，才会显示，原因是该控件为地图默认添加控件。当该控件显示时候，其默认的位置和全屏控件重合，所以如果想要显示该按钮，那么全屏按钮就会被覆盖。</p> <p>解决办法：</p> <ol><li>按照<code>mousepositioncontrol</code>的方式，将其默认位置放于其它地方</li> <li>覆盖其原有的 CSS 样式，最好不要修改原文件，因为其它地方如果使用的话，就会同样改变。</li></ol> <p>覆盖css样式方法：</p> <div class="language-css extra-class"><pre class="language-css"><code> <span class="token comment">/* rewrite the default css in `ol.css` */</span>
  <span class="token selector">.ol-rotate</span><span class="token punctuation">{</span>
    <span class="token property">right</span><span class="token punctuation">:</span>40px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>Rotate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
    autoHide<span class="token punctuation">:</span><span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>效果展示：</p> <p><img src="https://img-blog.csdn.net/20150512193627136" alt="markdown" title="markdown"></p> <h2 id="scaleline-control-比例尺控件"><a href="#scaleline-control-比例尺控件" aria-hidden="true" class="header-anchor">#</a> scaleline control - 比例尺控件</h2> <p>比例尺控件，显示当前地图的分辨率，也就是比例尺，默认的位置和 <code>overviewmap control</code>位置重合，要移动位置避免覆盖，同样覆盖默认样式：</p> <p>修改css:</p> <div class="language-css extra-class"><pre class="language-css"><code> <span class="token comment">/* rewrite the default css in `ol.css` */</span>
  <span class="token selector">.ol-scale-line</span> <span class="token punctuation">{</span>
    #<span class="token property">left</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>ScaleLine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p>效果展示：</p> <p><img src="https://img-blog.csdn.net/20150512193825649" alt="markdown" title="markdown"></p> <h2 id="zoom-control-缩放控件"><a href="#zoom-control-缩放控件" aria-hidden="true" class="header-anchor">#</a> zoom control - 缩放控件</h2> <p>缩放控件，包含两个按钮，一个放大，一个缩小，是默认加载的控件之一，默认的 CSS样式类分别为 <code>.ol-zoom-in</code>和<code>.ol-zoom-out</code>。</p> <p>效果展示：</p> <p><img src="https://img-blog.csdn.net/20150513085603148" alt="markdown" title="markdown"></p> <h2 id="zoomslider-control-缩放条控件"><a href="#zoomslider-control-缩放条控件" aria-hidden="true" class="header-anchor">#</a> zoomslider control - 缩放条控件</h2> <p>缩放条控件，主要显示当前的分辨率对应的刻度，给予一个直观的显示，其默认的条没有刻度，如果需要有刻度的，需要自己定制。可选的参数有：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @typedef {{className: (string|undefined),
 *     duration: (number|undefined),
 *     maxResolution: (number|undefined),
 *     minResolution: (number|undefined),
 *     render: (function(ol.MapEvent)|undefined)}}
 * @api
 */</span>
</code></pre></div><ul><li>maxResolution，表示其最大的分辨率</li> <li>minResolution，表示最小分辨率</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>ZoomSlider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p>效果展示：</p> <p><img src="https://img-blog.csdn.net/20150513090449178" alt="markdown" title="markdown"></p> <h2 id="zoomtoextent-control-缩放到图层控件"><a href="#zoomtoextent-control-缩放到图层控件" aria-hidden="true" class="header-anchor">#</a> zoomtoextent control - 缩放到图层控件</h2> <p>缩放到图层控件，将地图缩放到视口可以容纳整个地图的合适尺度，可选的参数如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @typedef {{className: (string|undefined),
 *     target: (Element|undefined),
 *     label: (string|Node|undefined),
 *     tipLabel: (string|undefined),
 *     extent: (ol.Extent|undefined)}}
 * @api stable
 */</span>
</code></pre></div><p>这个控件也没有什么特殊的选项，除了 <code>extent</code>，表示缩放到范围的大小。需要注意的是该控件位置和 <code>zoomslidercontrol</code> 位置会有部分重叠，同样，我们需要覆盖<code>zoomslidercontrol</code>的样式类： <code>.ol-zoomslider</code>：</p> <div class="language-css extra-class"><pre class="language-css"><code> <span class="token selector">.ol-zoomslider</span><span class="token punctuation">{</span>
    <span class="token property">top</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 9px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>ZoomToExtent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <p>常用的控件添加后的代码展示：</p> <div class="language-js extra-class"><pre class="language-js"><code>map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token comment">//init map</span>
    controls<span class="token punctuation">:</span> ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span><span class="token function">defaults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>FullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>MousePosition</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            coordinateFormat<span class="token punctuation">:</span> ol<span class="token punctuation">.</span>coordinate<span class="token punctuation">.</span><span class="token function">createStringXY</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            projection<span class="token punctuation">:</span> <span class="token string">'EPSG:4326'</span><span class="token punctuation">,</span>
            className<span class="token punctuation">:</span> <span class="token string">'custom-mouse-position'</span><span class="token punctuation">,</span>
            target<span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'mouse-position'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>OverviewMap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>Rotate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
            autoHide<span class="token punctuation">:</span><span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>ScaleLine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>ZoomSlider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>control<span class="token punctuation">.</span>ZoomToExtent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    target<span class="token punctuation">:</span> <span class="token string">'map'</span><span class="token punctuation">,</span>
    layers<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>Tile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        source<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>source<span class="token punctuation">.</span>MapQuest</span><span class="token punctuation">(</span><span class="token punctuation">{</span>layer<span class="token punctuation">:</span> <span class="token string">'sat'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      vectorLayer
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    view<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>View</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      center<span class="token punctuation">:</span> ol<span class="token punctuation">.</span>proj<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">37.41</span><span class="token punctuation">,</span> <span class="token number">8.82</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'EPSG:4326'</span><span class="token punctuation">,</span> <span class="token string">'EPSG:3857'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      zoom<span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><p>效果展示：</p> <p><img src="https://img-blog.csdn.net/20150513093728120" alt="markdown" title="markdown"></p> <p>当然，你也可以自定义所需的控件。在这里我做了一个简易的<a href="/Blog/gis/openlayer/control1.html">自定义控件</a>可作参考。</p> <h2 id="相关链接"><a href="#相关链接" aria-hidden="true" class="header-anchor">#</a> 相关链接</h2> <p><a href="https://blog.csdn.net/qingyafan/article/details/45715925" target="_blank" rel="noopener noreferrer">CSDN庆祝亚运会<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dengdengfengba/Blog/edit/master/docs/gis/openlayers/control.md" target="_blank" rel="noopener noreferrer">编辑该文档</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2019-10-6 17:16:27</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Blog/gis/openlayers/style.html" class="prev">地图样式</a></span> <span class="next"><a href="/Blog/gis/openlayers/interaction.html">地图交互</a>→
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/Blog/assets/js/app.0ad31845.js" defer></script><script src="/Blog/assets/js/2.1b5dd912.js" defer></script><script src="/Blog/assets/js/13.98392899.js" defer></script><script src="/Blog/assets/js/4.a1875dba.js" defer></script>
  </body>
</html>
