<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>地图样式 | 等等风吧</title>
    <meta name="description" content="等等风的个人博客">
    <link rel="apple-touch-icon" href="/Blog/apple-touch-icon.png">
  <link rel="icon" href="/Blog/favicon-32x32.png">
  <link rel="manifest" href="/Blog/manifest.json">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.f4f6d0f1.css" as="style"><link rel="preload" href="/Blog/assets/js/app.0ad31845.js" as="script"><link rel="preload" href="/Blog/assets/js/2.1b5dd912.js" as="script"><link rel="preload" href="/Blog/assets/js/28.7d39c37b.js" as="script"><link rel="preload" href="/Blog/assets/js/4.a1875dba.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.136c3538.js"><link rel="prefetch" href="/Blog/assets/js/11.12bceb81.js"><link rel="prefetch" href="/Blog/assets/js/12.c0e97e00.js"><link rel="prefetch" href="/Blog/assets/js/13.98392899.js"><link rel="prefetch" href="/Blog/assets/js/14.1a016337.js"><link rel="prefetch" href="/Blog/assets/js/15.8552bcca.js"><link rel="prefetch" href="/Blog/assets/js/16.458a1e33.js"><link rel="prefetch" href="/Blog/assets/js/17.67ad1ebe.js"><link rel="prefetch" href="/Blog/assets/js/18.e3a80131.js"><link rel="prefetch" href="/Blog/assets/js/19.7e8621a9.js"><link rel="prefetch" href="/Blog/assets/js/20.cd4ef131.js"><link rel="prefetch" href="/Blog/assets/js/21.d0904527.js"><link rel="prefetch" href="/Blog/assets/js/22.49895c6b.js"><link rel="prefetch" href="/Blog/assets/js/23.86d794cd.js"><link rel="prefetch" href="/Blog/assets/js/24.e31324ae.js"><link rel="prefetch" href="/Blog/assets/js/25.b8433c7d.js"><link rel="prefetch" href="/Blog/assets/js/26.6b1a1ab1.js"><link rel="prefetch" href="/Blog/assets/js/27.9381e493.js"><link rel="prefetch" href="/Blog/assets/js/29.866cb72b.js"><link rel="prefetch" href="/Blog/assets/js/3.aba7f2b2.js"><link rel="prefetch" href="/Blog/assets/js/30.0aa32a81.js"><link rel="prefetch" href="/Blog/assets/js/31.44290afc.js"><link rel="prefetch" href="/Blog/assets/js/32.3cf2a1f9.js"><link rel="prefetch" href="/Blog/assets/js/33.71d68c25.js"><link rel="prefetch" href="/Blog/assets/js/34.5c6eedf2.js"><link rel="prefetch" href="/Blog/assets/js/35.8e4b784e.js"><link rel="prefetch" href="/Blog/assets/js/36.3da44658.js"><link rel="prefetch" href="/Blog/assets/js/37.4accd394.js"><link rel="prefetch" href="/Blog/assets/js/38.aa2bb673.js"><link rel="prefetch" href="/Blog/assets/js/39.4c249910.js"><link rel="prefetch" href="/Blog/assets/js/40.90359bf7.js"><link rel="prefetch" href="/Blog/assets/js/41.ddce87f5.js"><link rel="prefetch" href="/Blog/assets/js/42.7e8c7a2d.js"><link rel="prefetch" href="/Blog/assets/js/43.ef98017e.js"><link rel="prefetch" href="/Blog/assets/js/44.aa779bb0.js"><link rel="prefetch" href="/Blog/assets/js/5.c75dcd3b.js"><link rel="prefetch" href="/Blog/assets/js/6.7e1b8072.js"><link rel="prefetch" href="/Blog/assets/js/7.35f20a04.js"><link rel="prefetch" href="/Blog/assets/js/8.fa8588d8.js"><link rel="prefetch" href="/Blog/assets/js/9.dff8b2a7.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.f4f6d0f1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">等等风吧</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/web/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/javascript/" class="nav-link">javascript</a></li></ul></div></div><div class="nav-item"><a href="/Blog/backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Blog/sql/" class="nav-link">数据库</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Gis</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/gis/OGC/" class="nav-link">OGC</a></li><li class="dropdown-item"><!----> <a href="/Blog/gis/openlayers/" class="nav-link router-link-active">openlayers</a></li></ul></div></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">大杂烩</a></div><div class="nav-item"><a href="/Blog/wen/" class="nav-link">好文欣赏</a></div><div class="nav-item"><a href="/Blog/guide/" class="nav-link">Guide</a></div> <a href="https://github.com/dengdengfengba/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/web/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/javascript/" class="nav-link">javascript</a></li></ul></div></div><div class="nav-item"><a href="/Blog/backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Blog/sql/" class="nav-link">数据库</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Gis</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/gis/OGC/" class="nav-link">OGC</a></li><li class="dropdown-item"><!----> <a href="/Blog/gis/openlayers/" class="nav-link router-link-active">openlayers</a></li></ul></div></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">大杂烩</a></div><div class="nav-item"><a href="/Blog/wen/" class="nav-link">好文欣赏</a></div><div class="nav-item"><a href="/Blog/guide/" class="nav-link">Guide</a></div> <a href="https://github.com/dengdengfengba/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>openlayers</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/gis/openlayers/" class="sidebar-link">首页</a></li><li><a href="/Blog/gis/openlayers/map.html" class="sidebar-link">创建一个地图实例</a></li><li><a href="/Blog/gis/openlayers/view.html" class="sidebar-link">地图视图</a></li><li><a href="/Blog/gis/openlayers/layers.html" class="sidebar-link">地图图层</a></li><li><a href="/Blog/gis/openlayers/vector.html" class="sidebar-link">地图矢量图层</a></li><li><a href="/Blog/gis/openlayers/source.html" class="sidebar-link">地图图层数据来源</a></li><li><a href="/Blog/gis/openlayers/style.html" class="active sidebar-link">地图样式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/style.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/style.html#参数" class="sidebar-link">参数</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/style.html#子类" class="sidebar-link">子类</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/style.html#例子" class="sidebar-link">例子</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/style.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/Blog/gis/openlayers/style.html#相关链接" class="sidebar-link">相关链接</a></li></ul></li><li><a href="/Blog/gis/openlayers/control.html" class="sidebar-link">地图控件</a></li><li><a href="/Blog/gis/openlayers/interaction.html" class="sidebar-link">地图交互</a></li><li><a href="/Blog/gis/openlayers/draw1.html" class="sidebar-link">draw详解</a></li><li><a href="/Blog/gis/openlayers/draw2.html" class="sidebar-link">draw原理</a></li><li><a href="/Blog/gis/openlayers/overlay.html" class="sidebar-link">地图覆盖物</a></li><li><a href="/Blog/gis/openlayers/popup.html" class="sidebar-link">地图弹出框</a></li><li><a href="/Blog/gis/openlayers/control1.html" class="sidebar-link">地图自定义控件</a></li><li><a href="/Blog/gis/openlayers/event.html" class="sidebar-link">地图事件</a></li><li><a href="/Blog/gis/openlayers/event1.html" class="sidebar-link">地图鼠标右键事件</a></li><li><a href="/Blog/gis/openlayers/point1.html" class="sidebar-link">地图点聚集</a></li><li><a href="/Blog/gis/openlayers/point2.html" class="sidebar-link">动态点扩散效果</a></li><li><a href="/Blog/gis/openlayers/point3.html" class="sidebar-link">地图实时追踪轨迹</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="介绍"><a href="#介绍" aria-hidden="true" class="header-anchor">#</a> 介绍</h2> <p>地图样式是由 style 类控制的，其包含了地图样式的方方面面，例如，填充色、图标样式、图片样式、规则图形样式、边界样式、文字样式等，样式一般针对矢量要素图层。</p> <p>矢量图层样式可以事先写好，写成静态的，矢量图层直接按照定义好的样式渲染，也可以动态使用样式的 set() 方法，但是要注意刷新矢量图层，重新渲染，否则动态样式不生效。</p> <h2 id="参数"><a href="#参数" aria-hidden="true" class="header-anchor">#</a> 参数</h2> <p>官方API：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @typedef {{geometry: (undefined|string|ol.geom.Geometry|ol.style.GeometryFunction),
 *     fill: (ol.style.Fill|undefined),
 *     image: (ol.style.Image|undefined),
 *     stroke: (ol.style.Stroke|undefined),
 *     text: (ol.style.Text|undefined),
 *     zIndex: (number|undefined)}}
 * @api
 */</span>
</code></pre></div><ul><li>geometry，要素的属性，或者要素，或者一个返回一个地理要素的函数，用来渲染成相应的地理要素</li> <li>fill，填充要素的样式</li> <li>iamge，图片样式，类型为 ol.style.Image</li> <li>stroke，要素边界样式，类型为 ol.style.Stroke</li> <li>text，要素文字的样式，类型为 ol.style.Text</li> <li>zIndex，CSS中的zIndex，即叠置的层次，为数字类型</li></ul> <h2 id="子类"><a href="#子类" aria-hidden="true" class="header-anchor">#</a> 子类</h2> <ul><li>ol.style.Circle，针对矢量要素设置圆形的样式，继承 ol.style.Image</li> <li>ol.style.Icon，针对矢量数据设置图标样式，继承 ol.style.Image</li> <li>ol.style.Fill，针对矢量要素设置填充样式</li> <li>ol.style.RegularShape，对矢量要素设置规则的图形样式，如果设置 radius，结果图形是一个规则的多边形，如果设置 radius1 和 radius2，结果图形将是一个星形</li> <li>ol.style.Stroke，矢量要素的边界样式</li> <li>ol.style.Text，矢量要素的文字样式</li></ul> <p>可以看出这些样式都是针对矢量要素的。</p> <h2 id="例子"><a href="#例子" aria-hidden="true" class="header-anchor">#</a> 例子</h2> <p>配置图层：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> style <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Style</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  fill<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">//矢量图层填充颜色，以及透明度</span>
    color<span class="token punctuation">:</span> <span class="token string">'rgba(255, 255, 255, 0.6)'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  stroke<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Stroke</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">//边界样式</span>
    color<span class="token punctuation">:</span> <span class="token string">'#319FD3'</span><span class="token punctuation">,</span>
    width<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  text<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">//文本样式</span>
    font<span class="token punctuation">:</span> <span class="token string">'12px Calibri,sans-serif'</span><span class="token punctuation">,</span>
    fill<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      color<span class="token punctuation">:</span> <span class="token string">'#000'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    stroke<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Stroke</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      color<span class="token punctuation">:</span> <span class="token string">'#fff'</span><span class="token punctuation">,</span>
      width<span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>效果展示：</p> <p><img src="https://img-blog.csdn.net/20150525085032979" alt="markdown" title="markdown"></p> <h3 id="geometry-地理属性"><a href="#geometry-地理属性" aria-hidden="true" class="header-anchor">#</a> geometry - 地理属性</h3> <p><code>geometry</code> 可以是要素的地理属性，或者 <code>geometry</code>，或者一个返回 <code>geometry</code> 类型的函数。一般与 <code>image</code> 样式配合使用，表示 <code>image</code> 放置的位置。例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Style</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    image<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      radius<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      fill<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        color<span class="token punctuation">:</span> <span class="token string">'orange'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">geometry</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">feature</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// return the coordinates of the first ring of the polygon</span>
      <span class="token keyword">var</span> coordinates <span class="token operator">=</span> feature<span class="token punctuation">.</span><span class="token function">getGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCoordinates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>geom<span class="token punctuation">.</span>MultiPoint</span><span class="token punctuation">(</span>coordinates<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>该样式配置了一个 <code>image</code> 属性，表示在相应的位置放置的图片的样式，这里是一个半径为 5，填充色为橙色的圆形的图片样式； <code>geometry</code> 属性配置了 <code>image</code> 放置的地理位置， 一个返回相应的要素的地理属性的函数。</p> <h3 id="fill-填充样式"><a href="#fill-填充样式" aria-hidden="true" class="header-anchor">#</a> fill - 填充样式</h3> <p><code>color: 'rgba(255, 255, 255, 0.9)'</code>，配置了图层的要素的填充颜色和透明度，格式为 <code>[R, G, B, A]</code>，分别代表 RGB 的三个分量，<code>A</code> 代表 <code>alpha</code>，即透明度。以上颜色配置为白色，每个分量值是<code>[0, 255]</code> 区间内的值，越小，越暗；越大，越亮。透明度为 <code>0.9</code>，透明度是一个<code>[0, 1]</code>区间内的值，越小，要素越是透明；越大，越不透明。</p> <p>更改颜色 <code>[0, 255, 0, 0.9]</code>，将颜色的绿色分量调为最大，其他颜色分量调为 0，那么地图的背景色应该变为纯绿色，刷新浏览器，得到下图：</p> <p><img src="https://img-blog.csdn.net/20150525085459646" alt="markdown" title="markdown"></p> <p>更改透明度<code>[255, 255, 255, 0.1]</code>，将透明度分量改为 0.1 ，预期图层将变得非常透明，刷新浏览器，得到如下图：</p> <p><img src="https://img-blog.csdn.net/20150525090325758" alt="markdown" title="markdown"></p> <h3 id="image-图片样式"><a href="#image-图片样式" aria-hidden="true" class="header-anchor">#</a> image - 图片样式</h3> <p>样式主要针对矢量图层（<code>vector layer</code>），矢量图层中包含一个或多个要素（<code>feature</code>），要素中包含一个地理属性（<code>geometry</code>）表示地理位置，还可能包含一个或多个其他属性，比如要素的名称、类型等等，要素可以使用单独的样式，这时候要使用 <code>feature.setStyle</code>(<code>ol.style.Style</code>) 来设置单独使用的样式，否则直接继承矢量图层的样式。</p> <p>使用 <code>setStyle</code> 方法设置单个要素样式，首先定义一个图标样式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> iconStyle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Style</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  image<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Icon</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    src<span class="token punctuation">:</span> <span class="token string">'data/icon.png'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>设置一个显示在特定位置的图片图标，使用 <code>ol.style.Icon</code>配置该属性，src属性设置了图片的地址，还可以设置透明度等属性。接下来定义一个点要素：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> iconFeature <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>Feature</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  geometry<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>geom<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>将样式应用于点要素：<code>iconFeature.setStyle(iconStyle)</code>;，最后定义一个矢量图层，并加入该要素：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> iconLayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>Vector</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    source<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>source<span class="token punctuation">.</span>Vector</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        features<span class="token punctuation">:</span> <span class="token punctuation">[</span>iconFeature<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>得到结果后，会在[0，0]坐标处显示一个图标：</p> <p><img src="https://img-blog.csdn.net/20150527204712361" alt="markdown" title="markdown"></p> <p>该样式有一个特性，就是地图中不显示相应区域时候，图片默认不加载，当该区域在地图视口中，才会加载图片，当然这是为了节省带宽，提高性能。如果我们将图层的<code>style</code>属性配置为<code>iconStyle</code>，那么结果是一样的，其结果是图层中的所有要素都会是一样的样式。需要指出的是，该样式只针对于点要素。</p> <h3 id="stroke-边界线条"><a href="#stroke-边界线条" aria-hidden="true" class="header-anchor">#</a> stroke - 边界线条</h3> <p><code>color: '#319FD3'</code>, <code>width: 1</code>，配置要素边界的颜色为 <code>'#319FD3'</code>，16 进制颜色代码，width 说明线条宽度为 1 像素。更改颜色为红色：<code>'#FF0000'</code>，结果如下图：</p> <p><img src="https://img-blog.csdn.net/20150525091903569" alt="markdown" title="markdown"></p> <p>若更改线条宽度：width:10，则得到如下结果：</p> <p><img src="https://img-blog.csdn.net/20150525092043759" alt="markdown" title="markdown"></p> <h3 id="text-文字"><a href="#text-文字" aria-hidden="true" class="header-anchor">#</a> text - 文字</h3> <p>设置矢量图层中的各个要素中要显示的文字的字体类型，线条填充颜色，线条边界颜色，因为文字的线条本身就具有宽度，所以有填充色和边界颜色说法。如下面的例子，设置了文字的大小、字体、填充色和边界颜色：</p> <div class="language-js extra-class"><pre class="language-js"><code>text<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  font<span class="token punctuation">:</span> <span class="token string">'12px Calibri,sans-serif'</span><span class="token punctuation">,</span>    <span class="token comment">//字体与大小</span>
  fill<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    <span class="token comment">//文字填充色</span>
    color<span class="token punctuation">:</span> <span class="token string">'#000'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  stroke<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Stroke</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    <span class="token comment">//文字边界宽度与颜色</span>
    color<span class="token punctuation">:</span> <span class="token string">'#fff'</span><span class="token punctuation">,</span>
    width<span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>font: '12px Calibri,sans-serif'</code>,指定了文字的大小和字体，我们修改文字大小为 24px，得到如下结果：</p> <p><img src="https://img-blog.csdn.net/20150525094113284" alt="markdown" title="markdown"></p> <p><code>fill</code> 规定了文字笔画线条的填充颜色，修改为 #FFF，结果应该是白色。结果如图：</p> <p><img src="https://img-blog.csdn.net/20150525094219575" alt="markdown" title="markdown"></p> <p><code>stroke</code> 规定了文字的边缘线条的颜色和宽度，其实文字本身就像一个地理要素一样，有填充和线条样式，可以看出文字的笔画线条外边缘有白色，就是这个样式在起作用。</p> <h3 id="条件样式"><a href="#条件样式" aria-hidden="true" class="header-anchor">#</a> 条件样式</h3> <p>条件样式是将样式配置为一个回调函数，其参数包含要素本身和分辨率，可以根据要素本身的属性和地图的分辨率，显示动态的样式，形式如 <code>style: function(feature, resolution) {}</code>。</p> <p>例如，以下代码段配置当分辨率小于 5000 时候，在要素上显示一个标签，标识要素名称：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">style</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">feature<span class="token punctuation">,</span> resolution</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    style<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>resolution <span class="token operator">&lt;</span> <span class="token number">5000</span> <span class="token operator">?</span> feature<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> styles<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <p>样式主要针对矢量图层数据，既可以配置一个全局的样式，也可以针对每个feature单独配置；既可以应用统一的样式，也可以根据要素和分辨率应用条件样式。样式应用是非常灵活的。</p> <p>另外，样式是可以多个一起起作用的，就如同 HTML 的元素样式类 class 可以有多个一样。如下例子中，就应用了两个样式，一个是应用于多边形本身，另一个用于绘制每个多边形的顶点：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> styles <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Style</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    stroke<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Stroke</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      color<span class="token punctuation">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span>
      width<span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    fill<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      color<span class="token punctuation">:</span> <span class="token string">'rgba(0, 0, 255, 0.1)'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Style</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    image<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      radius<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      fill<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>style<span class="token punctuation">.</span>Fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        color<span class="token punctuation">:</span> <span class="token string">'orange'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">geometry</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">feature</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// return the coordinates of the first ring of the polygon</span>
      <span class="token keyword">var</span> coordinates <span class="token operator">=</span> feature<span class="token punctuation">.</span><span class="token function">getGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCoordinates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>geom<span class="token punctuation">.</span>MultiPoint</span><span class="token punctuation">(</span>coordinates<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="相关链接"><a href="#相关链接" aria-hidden="true" class="header-anchor">#</a> 相关链接</h2> <p><a href="https://blog.csdn.net/qingyafan/article/details/46273663" target="_blank" rel="noopener noreferrer">CSDN庆祝亚运会<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dengdengfengba/Blog/edit/master/docs/gis/openlayers/style.md" target="_blank" rel="noopener noreferrer">编辑该文档</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2019-10-6 17:16:27</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Blog/gis/openlayers/source.html" class="prev">地图图层数据来源</a></span> <span class="next"><a href="/Blog/gis/openlayers/control.html">地图控件</a>→
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/Blog/assets/js/app.0ad31845.js" defer></script><script src="/Blog/assets/js/2.1b5dd912.js" defer></script><script src="/Blog/assets/js/28.7d39c37b.js" defer></script><script src="/Blog/assets/js/4.a1875dba.js" defer></script>
  </body>
</html>
