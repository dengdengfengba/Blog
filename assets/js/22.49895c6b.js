(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{163:function(t,e,a){"use strict";a.r(e);var n=a(2),o=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍","aria-hidden":"true"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),a("p",[a("code",[t._v("Overlay")]),t._v(" 从名字看，是覆盖图、覆盖物的意思，主要的用途就是在地图之上再覆盖一层，用以显示额外的可见元素，可见元素一般是 HTML 元素，利用 "),a("code",[t._v("overlay")]),t._v("，可以将可见元素放置到地图的任意位置，形成地图上再浮动一层的效果。例如在地图上相应的坐标放置一个标志，标签，利用 "),a("code",[t._v("overlay")]),t._v(" 都可以做到，具体来说，点击地图上某位置，在点击位置弹出弹出框就是利用了 "),a("code",[t._v("overlay")]),t._v("。")]),t._v(" "),a("p",[t._v("因为 "),a("code",[t._v("overlay")]),t._v(" 是固定在特定坐标的可见元素，因此移动地图（pan操作）和进行缩放，"),a("code",[t._v("overlay")]),t._v(" 会与地图坐标相对位置不变，跟着地图移动。"),a("code",[t._v("overlay")]),t._v(" 直接继承了 "),a("code",[t._v("ol.Object")]),t._v(" ，很多 "),a("code",[t._v("ol.Object")]),t._v(" 对象的方法和监听事件直接被继承到了 "),a("code",[t._v("overlay")]),t._v(" 中。")]),t._v(" "),a("h2",{attrs:{id:"参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数","aria-hidden":"true"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),a("p",[a("code",[t._v("overlay")]),t._v(" 初始化时可以接受很多的配置参数，这些配置参数是一个个的键值对，共同构成一个对象字面量（"),a("code",[t._v("options")]),t._v("），然后传递给其“构造函数”，如 "),a("code",[t._v("new ol.Overlay(options)")]),t._v("，此处的 "),a("code",[t._v("options")]),t._v(" 便是参数键值对构成的对象字面量。可配置的键值对，定义如下：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Object literal with config options for the overlay.\n * @typedef {{id: (number|string|undefined),\n *     element: (Element|undefined),\n *     offset: (Array.<number>|undefined),\n *     position: (ol.Coordinate|undefined),\n *     positioning: (ol.OverlayPositioning|string|undefined),\n *     stopEvent: (boolean|undefined),\n *     insertFirst: (boolean|undefined),\n *     autoPan: (boolean|undefined),\n *     autoPanAnimation: (olx.animation.PanOptions|undefined),\n *     autoPanMargin: (number|undefined)}}\n * @api stable\n */")]),t._v("\nolx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OverlayOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("id: 为对应的 overlay 设置一个 id，便于使用 ol.Map 的 getOverlayById 方法取得相应的 overlay")]),t._v(" "),a("li",[t._v("element: overlay 包含的 DOM element")]),t._v(" "),a("li",[t._v("offset: 偏移量，像素为单位，overlay 相对于放置位置（position）的偏移量，默认值是 [0, 0]，正值分别向右和向下偏移")]),t._v(" "),a("li",[t._v("position: 在地图所在的坐标系框架下，overlay 放置的位置")]),t._v(" "),a("li",[t._v("positioning: overlay 对于 position 的相对位置，可能的值包括 bottom-left、bottom-center、bottom-right 、center-left、center-center、center-right、top-left、top-center、top-right，默认是 top-left，也就是 element 左上角与 position 重合")]),t._v(" "),a("li",[t._v("stopEvent: 地图的事件传播是否停止，默认是 true，即阻止传播，可能不太好理解，举个例子，当鼠标滚轮在地图上滚动时，会触发地图缩放事件，如果在 overlay 之上滚动滚轮，并不会触发缩放事件，如果想鼠标在 overlay 之上也支持缩放，那么将该属性设置为 false 即可")]),t._v(" "),a("li",[t._v("insertFirst: overlay 是否应该先添加到其所在的容器（container），当 stopEvent 设置为 true 时，overlay 和 openlayers 的控件（controls）是放于一个容器的，此时将 insertFirst 设置为 true ，overlay 会首先添加到容器，这样，overlay 默认在控件的下一层（CSS z-index），所以，当 stopEvent 和 insertFirst 都采用默认值时，overlay 默认在 控件的下一层")]),t._v(" "),a("li",[t._v("autoPan: 当触发 overlay setPosition 方法时触发，当 overlay 超出地图边界时，地图自动移动，以保证 overlay 全部可见")]),t._v(" "),a("li",[t._v("autoPanAnimation: 设置 autoPan 的效果动画，参数类型是 olx.animation.panOptions")]),t._v(" "),a("li",[t._v("autoPanMargin: 地图自动平移时，地图边缘与 overlay 的留白（空隙），单位是像素，默认是 20像素")])]),t._v(" "),a("h2",{attrs:{id:"事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件","aria-hidden":"true"}},[t._v("#")]),t._v(" 事件")]),t._v(" "),a("p",[t._v("支持的事件主要是继承 "),a("code",[t._v("ol.Object")]),t._v(" 而来的 "),a("code",[t._v("change")]),t._v(" 事件，当 "),a("code",[t._v("overlay")]),t._v(" 相关属性或对象变化时触发：")]),t._v(" "),a("ul",[a("li",[t._v("change，当引用计数器增加时，触发")]),t._v(" "),a("li",[t._v("change:element，overlay 对应的 element 变化时触发")]),t._v(" "),a("li",[t._v("change:map，overlay 对应的 map 变化时触发")]),t._v(" "),a("li",[t._v("change:offset，overlay 对应的 offset 变化时触发")]),t._v(" "),a("li",[t._v("change:position，overlay 对应的 position 变化时触发")]),t._v(" "),a("li",[t._v("change:positioning，overlay 对应的 positioning 变化时触发")]),t._v(" "),a("li",[t._v("propertychange，overlay 对应的属性变化时触发")])]),t._v(" "),a("p",[t._v("openlayers 绑定事件遵循一般的 dom 事件绑定规则，包括 DOM 2 级事件绑定。举例说明：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// example overlay event binding")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" overlay "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Overlay")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\noverlay"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"change:position"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"位置改变！"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法","aria-hidden":"true"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),a("p",[t._v("支持的方法这里只介绍 overlay 特有的方法，就不介绍其继承而来的方法。主要是针对 overlay 的属性及其相关联对象的 get 和 set 方法：")]),t._v(" "),a("ul",[a("li",[t._v("getElement，取得包含 overlay 的 DOM 元素")]),t._v(" "),a("li",[t._v("getId，取得 overlay 的 id")]),t._v(" "),a("li",[t._v("getMap，获取与 overlay 关联的 map对象")]),t._v(" "),a("li",[t._v("getOffset，获取 offset 属性")]),t._v(" "),a("li",[t._v("getPosition，获取 position 属性")]),t._v(" "),a("li",[t._v("getPositioning，获取 positioning 属性")]),t._v(" "),a("li",[t._v("setElement；设置 overlay 的 element")]),t._v(" "),a("li",[t._v("setMap，设置与 overlay 的 map 对象")]),t._v(" "),a("li",[t._v("setOffset，设置 offset")]),t._v(" "),a("li",[t._v("setPosition，设置 position 属性")]),t._v(" "),a("li",[t._v("setPositioning，设置 positioning 属性")])]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("利用 Overlay 可以做出很多很棒的效果，任何做出的 HTML 元素效果，都可以通过 overlay 添加到地图之上，形成覆盖物的效果，如在灾害点放置动态点扩散效果的文章中实现的效果，以及点击地图，在相应位置"),a("router-link",{attrs:{to:"/gis/openlayer/popup.html"}},[t._v("弹出信息框")]),t._v("，都是利用了 overlay 。")],1),t._v(" "),a("h2",{attrs:{id:"相关链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关链接","aria-hidden":"true"}},[t._v("#")]),t._v(" 相关链接")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/qingyafan/article/details/49840041",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSDN庆祝亚运会"),a("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=o.exports}}]);